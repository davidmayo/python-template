project_name:
  type: str
  help: What is the project's name?

module_name:
  type: str
  help: What is the main module's name?
  default: "{{ project_name|lower|replace(' ', '_') }}"

python_version:
  type: str
  help: Which minimum Python version will you use?
  default: "3.10"

author_name:
  type: str
  help: Who is the project's author?
  default: "David Mayo"

author_email_choice:
  type: str
  help: What is the author's email?
  default: "dcmayo@moreheadstate.edu"
  choices:
    - "dcmayo@moreheadstate.edu"
    - "dcmayo@gmail.com"
    - "<Other>"

author_email_other:
  type: str
  help: Please provide the author's email.
  when: "{{ author_email_choice == '<Other>' }}"
  default: ""

author_email:
  type: str
  when: false
  default: "{{ author_email_choice if author_email_choice != '<Other>' else author_email_other }}"

_tasks:
  - command: ["uv", "sync"]
    working_directory: "{{project_name}}"

  - command: ["git", "init"]
    working_directory: "{{project_name}}"
  - command: ["git", "checkout", "-b", "main"]
    working_directory: "{{project_name}}"
  - command: ["git", "add", "-A"]
    working_directory: "{{project_name}}"
  - command: ["git", "commit", "-m", "Initial scaffolding commit"]
    working_directory: "{{project_name}}"

  - command: ["rm", ".copier-answers.yml"]
    working_directory: "{{project_name}}"

  - command: ["rm", ".copier-answers.yml"]
    # working_directory: "{{project_name}}"
    when: "{{ _copier_conf.os in  ['linux', 'macos'] }}"
  - command: ["Remove-Item", ".copier-answers.yml"]
    # working_directory: "{{project_name}}"
    when: "{{ _copier_conf.os == 'windows' }}"